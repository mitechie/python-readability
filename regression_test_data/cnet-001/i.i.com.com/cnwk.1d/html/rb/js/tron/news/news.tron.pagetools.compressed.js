
   if(!dbugScripts("news",["news.tron.pagetools.js"])) {
   /*	news.tron.pagetools.js - packed	*/
       var ModalForm=new Class({Implements:Options,options:{modalId:"",popupContents:"default",counterFields:null,resetOnClose:false,clearOnReset:false,useCaptcha:false,onFormSubmitSuccess:"",onFormSubmitFail:"",requireLogin:false,captchaURL:"/8708-5_1-0.html?CAPTCHA=id&nomesh&refresh="},initialize:function(B,A){this.setOptions(A);this.element=$$(B);this.initModalForm();},initModalForm:function(){dbug.log("init modal");this.modalForm=new GlobalModal({id:this.options.modalId,content:$(this.options.popupContents).toggleClass("globalModal"),onClose:function(){if(this.options.resetOnClose){this.resetForm();}}.bind(this)});this.form=$(this.options.modalId).getElement("form");this.modalFormValidator=new ModalFormValidator(this.form,{evaluateFieldsOnBlur:false,evaluateFieldsOnChange:false,evaluateOnSubmit:false});this.form.addEvent("submit",function(A){A.stop();if(!this.modalFormValidator.validate()){return ;}new ModalFormRequest({url:this.form.get("action"),data:this.form.toQueryString(),onSuccess:this.options.onFormSubmitSuccess.bind(this),onFailure:this.options.onFormSubmitFail.bind(this)}).send();}.bind(this));if(this.options.counterFields!=null){this.options.counterFields.field.each(function(B,A){this.fieldCounter(this.form.getElement(B),this.form.getElement(this.options.counterFields.counter[A]));}.bind(this));}$$(this.element).addEvent("click",function(){dbug.log("click");if(this.options.requireLogin){if(!UserVars.isLoggedIn()){CURS.Manager.checkLogin({loginHed:"Log in to CNET to report this profile",registerHed:"Join CNET to report this profile",appId:103,nextAction:function(){new Jlogger({tag:"ropProfile",element:false,ctype:"overlay;source",cval:"login;rop"}).ping();this.showModalForm.bind(this);}.bind(this)});}else{this.showModalForm();}}else{this.showModalForm();}}.bind(this));},showModalForm:function(){if(this.options.useCaptcha){this.getCaptcha();}this.modalForm.show();},resetForm:function(){this.modalFormValidator.reset();this.modalFormValidator.paused=false;this.form.setStyle("display","block");this.form.getParent().getElements(".emailSuccess, .emailFail").dispose();if(this.form.getElement("p span")){this.form.getElement("p span").set("text","0");this.form.getElement("p span").removeClass("validation-advice");}if(this.options.clearOnReset){this.form.reset();}},getCaptcha:function(){new Request({method:"get",url:this.options.captchaURL+new Date().getTime(),onComplete:function(A){if(A){var B=A.trim();$exec(B);var C=new Element("a",{href:"javascript:void(0);","class":"refreshCaptcha",id:"getCaptchaCode"}).set("text","Try a new code");C.addEvent("click",function(){this.getCaptcha();}.bind(this));C.inject($$("#captcha input")[0],"after");$("captcha").getElement("input[name=CAPTCHA_RESPONSE]").addClass("required");}}.bind(this)}).send();},fieldCounter:function(A,C){var B=A.get("validatorProps");if(!B){return ;}B=JSON.decode(B);if(!B&&!B.maxLength){return ;}this.updateCounter(A,B,C);A.addEvent("keyup",function(){this.updateCounter(A,B,C);}.bind(this));},updateCounter:function(B,C,D){var A=B.value.trim().length;D.set("text",A);if((A<(C.minLength||0))||(A>C.maxLength)){D.addClass("validation-advice");}else{D.removeClass("validation-advice");}}});var ModalFormRequest=new Class({Extends:Request,processScripts:function(A){if(this.options.evalResponse){return $exec(A);}return A.stripScripts(this.options.evalScripts);}});var ModalFormValidator=new Class({Extends:FormValidator,makeAdvice:function(D,F,C,G){var E=(G)?this.options.warningPrefix:this.options.errorPrefix;E+=(this.options.useTitles)?F.title||C:C;var B=this.getAdvice(D,F);if(!B){var A=(G)?"warning-advice":"validation-advice";B=new Element("div",{text:E,styles:{display:"none"},id:"advice-"+D+"-"+this.getFieldId(F)}).addClass(A);}else{B.set("text",E);}return B;}});window.addEvent("domready",function(){if((PageVars.get("nodeId")==="32254")||(PageVars.get("nodeId")==="32485")||(PageVars.get("nodeId")==="32498")||(PageVars.get("nodeId")==="32487")||(PageVars.get("nodeId")==="32488")||(PageVars.get("nodeId")==="32489")||(PageVars.get("nodeId")==="32491")||(PageVars.get("nodeId")==="32490")||(PageVars.get("nodeId")==="32491")||(PageVars.get("nodeId")==="32492")||(PageVars.get("nodeId")==="32493")||(PageVars.get("nodeId")==="32486")||(PageVars.get("nodeId")==="32495")||(PageVars.get("nodeId")==="32496")||(PageVars.get("nodeId")==="32497")||(PageVars.get("nodeId")==="32494")||(PageVars.get("nodeId")==="32499")||(PageVars.get("nodeId")==="32500")){dbug.log("JloggerLEVT fired");new JloggerLEVT("ria",{applicationTags:{event:"log",comptyp:"ces",comp:"page",riaevent:"view",objtyp:"x_keywords",objnm:DW.pageParams.x_keywords}}).ping();}});if($("fontSizeStyles")){PageTools.setFontStyles();}window.addEvent("domready",function(){$$(".contentTools a.share, .shareButton a.share").each(function(B){B.addEvent("mouseenter",PageTools.openShare.bind(PageTools));});$$(".contentTools a.email, .emailButton a.email").each(function(B){B.addEvent("click",PageTools.email);});$$(".contentTools a.print, .printButton a.print").each(function(B){B.addEvent("click",PageTools.print);});$$(".contentTools .fontSize a.smaller").each(function(B){B.addEvent("click",PageTools.fontSizeSmaller.bind(PageTools));});$$(".contentTools .fontSize a.larger").each(function(B){B.addEvent("click",PageTools.fontSizeLarger.bind(PageTools));});if($("emailEditorForm")){var A=PageVars.get("siteId");if(A==="105"||A==="109"){A="3";}new ModalForm(".editorEmail",{reauthenticate:false,counterFields:{field:["input[name=subject]","textarea[name=body]"],counter:[".subjectCount",".bodyCount"]},popupContents:$("emailEditorForm"),modalId:"emailEditor",resetOnClose:true,clearOnReset:true,useCaptcha:true,captchaURL:"/8708-5_"+A+"-0.html?CAPTCHA=id&noluke&refresh=",getCaptcha:function(){new Request({method:"get",url:this.options.captchaURL+new Date().getTime(),onComplete:function(B){if(B){var C=B.trim();$exec(C);var D=new Element("a",{href:"javascript:void(0);","class":"refreshCaptcha",id:"getCaptchaCode"}).set("text","Try a new code");D.addEvent("click",function(){this.getCaptcha();}.bind(this));D.inject($$("#captcha input")[0],"after");$("captcha").getElement("input[name=CAPTCHA_RESPONSE]").addClass("required");}}.bind(this)}).send();},onFormSubmitSuccess:function(C){if(C){var E=JSON.decode(C).response;if(E.result["$"]=="failure"){if($$(".emailFail").length>0){var D=$$(".emailFail")[0];}else{var D=new Element("div",{"class":"validation-advice emailFail"});}D.set("html","<b>Error: </b>"+E.message["$"]);if(E.message["$"]=="You did not successfully enter the characters in the verification box."){D.inject($("captcha"),"before");}else{D.inject($("emailEditor").getElement("form"),"before");}this.getCaptcha();}else{if(E.result["$"]=="success"){var B=new Element("div",{"class":"emailSuccess"}).set("html","Thank you. "+E.message["$"]);B.inject($("emailEditor").getElement("form"),"before");if($$(".emailFail").length>0){$$(".emailFail").dispose();}$("emailEditor").getElements("form, p").setStyle("display","none");this.modalForm.hide.delay(4000,this.modalForm);}}}},onFormSubmitFail:function(){dbug.log("form not sent");}});}else{$$(".emailEditor").setStyle("display","none");}});
   }
       